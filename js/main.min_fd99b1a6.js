var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},__extends=function(e,t){function n(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__assign=Object.assign||function(e){for(var t,n=1,o=arguments.length;o>n;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},__rest=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n},__decorate=function(e,t,n,o){var r,i=arguments.length,s=3>i?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(3>i?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},__param=function(e,t){return function(n,o){t(n,o,e)}},__metadata=function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},__awaiter=function(e,t,n,o){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function s(e){try{u(o.next(e))}catch(t){i(t)}}function a(e){try{u(o["throw"](e))}catch(t){i(t)}}function u(e){e.done?n(e.value):r(e.value).then(s,a)}u((o=o.apply(e,t||[])).next())})},__generator=function(e,t){function n(e){return function(t){return o([e,t])}}function o(n){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,i&&(s=2&n[0]?i["return"]:n[0]?i["throw"]||((s=i["return"])&&s.call(i),0):i.next)&&!(s=s.call(i,n[1])).done)return s;switch(i=0,s&&(n=[2&n[0],s.value]),n[0]){case 0:case 1:s=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,i=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(s=u.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){u.label=n[1];break}if(6===n[0]&&u.label<s[1]){u.label=s[1],s=n;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(n);break}s[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(o){n=[6,o],i=0}finally{r=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var r,i,s,a,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},__exportStar=function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||__createBinding(t,e,n)},__createBinding=Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]},__values=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},__read=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),s=[];try{for(;(void 0===t||t-->0)&&!(o=i.next()).done;)s.push(o.value)}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return s},__spread=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e},__spreadArrays=function(){for(var e=0,t=0,n=arguments.length;n>t;t++)e+=arguments[t].length;for(var o=Array(e),r=0,t=0;n>t;t++)for(var i=arguments[t],s=0,a=i.length;a>s;s++,r++)o[r]=i[s];return o},__await=function(e){return this instanceof __await?(this.v=e,this):new __await(e)},__asyncGenerator=function(e,t,n){function o(e){c[e]&&(l[e]=function(t){return new Promise(function(n,o){h.push([e,t,n,o])>1||r(e,t)})})}function r(e,t){try{i(c[e](t))}catch(n){u(h[0][3],n)}}function i(e){e.value instanceof __await?Promise.resolve(e.value.v).then(s,a):u(h[0][2],e)}function s(e){r("next",e)}function a(e){r("throw",e)}function u(e,t){e(t),h.shift(),h.length&&r(h[0][0],h[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,c=n.apply(e,t||[]),h=[];return l={},o("next"),o("throw"),o("return"),l[Symbol.asyncIterator]=function(){return this},l},__asyncDelegator=function(e){function t(t,r){n[t]=e[t]?function(n){return(o=!o)?{value:__await(e[t](n)),done:"return"===t}:r?r(n):n}:r}var n,o;return n={},t("next"),t("throw",function(e){throw e}),t("return"),n[Symbol.iterator]=function(){return this},n},__asyncValues=function(e){function t(t){o[t]=e[t]&&function(o){return new Promise(function(r,i){o=e[t](o),n(r,i,o.done,o.value)})}}function n(e,t,n,o){Promise.resolve(o).then(function(t){e({value:t,done:n})},t)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),o={},t("next"),t("throw"),t("return"),o[Symbol.asyncIterator]=function(){return this},o)},__makeTemplateObject=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},__setModuleDefault=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t},__importStar=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&__createBinding(t,e,n);return __setModuleDefault(t,e),t},__importDefault=function(e){return e&&e.__esModule?e:{"default":e}},__classPrivateFieldGet=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},__classPrivateFieldSet=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},__reflect=function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n};!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(t){return e[t]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){n(1),n(2),n(3),n(4),n(5),n(6),n(7),n(8),n(9),n(10),n(11),n(12);var o;!function(e){e[e.NULL=0]="NULL",e[e.LEVEL=1]="LEVEL",e[e.GAME=2]="GAME",e[e.WAITING=3]="WAITING",e[e.COVER=4]="COVER"}(o||(o={})),window.MainState=o;var r=function(e){function t(){var n=e.call(this)||this;n.state=o.NULL,n.lastState=o.NULL,n.resLoaded=!1,n.allWords=new Set,n.answerWords=[],n.deltaTime=.0333333333,n.lastTime=0,n.resLoaded=!1,n.sortableChildren=!0,egret.ImageLoader.crossOrigin="anonymous",platform.onAudioInterruptionBegin(onAudioInterruptionBegin),platform.onAudioInterruptionEnd(onAudioInterruptionEnd);var r=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",r),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter);var i=egret.MainContext.instance.stage;return n.sortableChildren=!0,console.log("窗口宽高："+window.screen.availWidth+" "+window.screen.availHeight),console.log("屏幕宽高："+i.stageWidth+" "+i.stageHeight),console.log("Inner宽高："+window.innerWidth+" "+window.innerHeight),console.log("Outter宽高："+window.outerWidth+" "+window.outerHeight),n.width=i.stageWidth,n.height=i.stageHeight,console.log("视图宽高："+n.width+" "+n.height),MyStorage.Inst,t._inst=n,n.SwitchState(o.NULL),n.once(egret.Event.ADDED_TO_STAGE,n.Start,n),n.once(egret.TouchEvent.TOUCH_BEGIN,function(){SoundMain.Inst.PlayBGM()},null),n}return __extends(t,e),Object.defineProperty(t,"Inst",{get:function(){return t._inst},enumerable:!1,configurable:!0}),t.prototype.Start=function(e){return __awaiter(this,void 0,void 0,function(){var e,t=this;return __generator(this,function(n){switch(n.label){case 0:return e=this,egret.lifecycle.addLifecycleListener(function(e){}),egret.lifecycle.onPause=function(){console.log("egret.lifecycle.onPause"),egret.ticker.pause(),onAudioInterruptionBegin()},egret.lifecycle.onResume=function(){console.log("egret.lifecycle.onResume"),egret.ticker.resume(),onAudioInterruptionEnd()},[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return n.sent(),[4,new Promise(function(e,n){var o=new eui.Theme("resource/default.thm.json",t.stage);o.once(eui.UIEvent.COMPLETE,function(){e(0)},t)})];case 2:return n.sent(),[4,Util.LoadGroupRes(["common"])];case 3:return n.sent(),[4,platform.gameReady()];case 4:return n.sent(),this.answerWords=RES.getRes("answerlist_txt").split(","),this.allWords=new Set(RES.getRes("wordlist_txt").split(",")),this.addChild(Scene.Common.Inst),Scene.Common.Inst.Start(),this.resLoaded=!0,this.SwitchState(o.GAME),this.lastTime=(new Date).getTime(),this.addEventListener(egret.Event.ENTER_FRAME,this.Update,this),[2]}})})},t.prototype.SwitchState=function(e,t){return __awaiter(this,void 0,void 0,function(){var t,n;return __generator(this,function(r){switch(r.label){case 0:switch(t=this,null!=t.scene&&(t.removeChild(t.scene),t.scene.Stop(),t.scene=null),n=null,e){case o.GAME:n=new Scene.Game.Main;break;case o.COVER:platform.showInterstitialAd();break;case o.LEVEL:}return t.state!=o.WAITING&&(t.lastState=t.state),t.state=o.WAITING,null==n?[3,2]:(n.width=t.width,n.height=t.height,t.addChild(n),n.zIndex=10,n.x=t.width/2-n.width/2,n.y=t.height/2-n.height/2,[4,n.Start()]);case 1:r.sent(),t.scene=n,t.state=e,r.label=2;case 2:return[2]}})})},t.prototype.Update=function(){var e=(new Date).getTime();this.deltaTime=(e-this.lastTime)/1e3,this.deltaTime>.036&&(this.deltaTime=.036),this.lastTime=e,Scene.Common.Inst.Update(this.deltaTime),null!=this.scene&&this.scene.Update(this.deltaTime),platform.Update(this.deltaTime)},t._inst=null,t}(egret.DisplayObjectContainer);window.Main=r,__reflect(r.prototype,"Main",[]);var i=r;window.GMain=i},function(e,t){var n=function(){function e(){}return e.prototype.getAsset=function(e,t,n){function o(o){t.call(n,o,e)}if(RES.hasRes(e)){var r=RES.getRes(e);r?o(r):RES.getResAsync(e,o,this)}else RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_IMAGE)},e}();window.AssetAdapter=n,__reflect(n.prototype,"AssetAdapter",["eui.IAssetAdapter"])},function(e,t){var n=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.onProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);window.LoadingUI=n,__reflect(n.prototype,"LoadingUI",["RES.PromiseTaskReporter"])},function(e,t){var n=function(){function e(){this.bgmOn=1,this.soundOn=1,this.Init(),this.InitSetting()}return Object.defineProperty(e,"Inst",{get:function(){if(null==e._inst){var t=new e;e._inst=t}return e._inst},enumerable:!1,configurable:!0}),e.prototype.Init=function(){var e=localStorage.getItem("wordle_storage"),t=null;null!=e&&""!=e&&(t=JSON.parse(e)),null==t&&(t={daily:[]}),this.daily=t.daily},e.prototype.InitSetting=function(){var e=localStorage.getItem("wordle_setting"),t=null;null!=e&&""!=e&&(t=JSON.parse(e)),null==t&&(t={sound:this.soundOn,bgm:this.bgmOn}),this.soundOn=t.sound,null==this.soundOn&&(this.soundOn=1),this.bgmOn=t.bgm,null==this.bgmOn&&(this.bgmOn=1)},e.prototype.SaveSetting=function(){var e={sound:this.soundOn,bgm:this.bgmOn};localStorage.setItem("wordle_setting",JSON.stringify(e))},e.prototype.Save=function(){var e={daily:this.daily};null!=e&&localStorage.setItem("wordle_storage",JSON.stringify(e))},e.maxLv=99,e}();window.MyStorage=n,__reflect(n.prototype,"MyStorage",[])},function(e,t){var n=function(){function e(){}return e.prototype.Update=function(e){},e.prototype.showCustomAd=function(){},e.prototype.hideCustomAd=function(){},e.prototype.showAskModel=function(e,t,n,o){setTimeout(n,200)},e.prototype.showTopAd=function(){},e.prototype.showRewardedVideoAd=function(e,t){e(!0)},e.prototype.showBanner=function(){},e.prototype.hideBanner=function(){},e.prototype.onAudioInterruptionBegin=function(e){},e.prototype.onAudioInterruptionEnd=function(e){},e.prototype.showToast=function(e){},e.prototype.moreGame=function(){},e.prototype.showInterstitialAd=function(){},e.prototype.gameReady=function(){document.getElementById('loading').style.display = 'none';},e.prototype.setScore=function(e){},e.prototype.invite=function(){},e.prototype.share=function(){},e}();window.DebugPlatform=n,__reflect(n.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new n)},function(e,t){function n(){0!=i.Inst.soundReady&&(console.log("onAudioInterruptionBegin: "+i.Inst.NoChannel),0==i.Inst.NoChannel&&(console.log("audio stop"),i.Inst.NoChannel=!0,i.Inst.Stop()))}function o(){0!=i.Inst.soundReady&&(console.log("onAudioInterruptionEnd: "+i.Inst.NoChannel),1==i.Inst.NoChannel&&(console.log("audio resume."),i.Inst.NoChannel=!1,i.Inst.Resume()))}var r={Click:["button_mp3",200,0],Fail:["fail_mp3",200,0],Win:["win_mp3",200,0],Star:["winstar_mp3",0,0],Wrong:["incorrect_mp3",0,0]};window.SoundEffect=r;var i=function(){function e(){this._hasTouch=0,this.NoChannel=!1,this.soundReady=!1}return Object.defineProperty(e,"Inst",{get:function(){if(null==e._inst){var t=new e;e._inst=t}return e._inst},enumerable:!1,configurable:!0}),e.prototype.PlaySound=function(e){if(0!=this.Sound&&0!=this.soundReady){if(e[1]>0){var t=(new Date).getTime();if(t-e[2]<e[1])return;e[2]=t}if(1!=this.NoChannel){var n=e[0],o=RES.getRes(n);return null==o?void console.warn("音效:"+n+"未加载."):void o.play(0,1)}}},e.prototype.PlayBGM=function(e){void 0===e&&(e="bgm_mp3"),this._hasTouch++,this._hasTouch<2||(null==this._bgm&&(this._bgm=RES.getRes(e),this._bgm.type=egret.Sound.MUSIC,this._lastBGMPos=0),1!=this.NoChannel&&(this._bgmChannel=this._bgm.play(0),this._bgmChannel.volume=1==this.BGM?1:0))},Object.defineProperty(e.prototype,"Sound",{get:function(){return 1==MyStorage.Inst.soundOn},set:function(e){MyStorage.Inst.soundOn=1==e?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"BGM",{get:function(){return 1==MyStorage.Inst.bgmOn},set:function(e){MyStorage.Inst.bgmOn=1==e?1:0,MyStorage.Inst.SaveSetting(),0!=this.soundReady&&(this._bgmChannel.volume=1==e?1:0)},enumerable:!1,configurable:!0}),e.prototype.Stop=function(){null!=this._bgmChannel&&(this._bgmChannel.removeEventListener(egret.Event.SOUND_COMPLETE,this.onBGMComplete,this),this._lastBGMPos=this._bgmChannel.position,this._bgmChannel.stop(),this._bgmChannel=null)},e.prototype.Resume=function(){null!=this._bgmChannel&&(this._lastBGMPos=this._bgmChannel.position,this._bgmChannel.stop(),this._bgmChannel=null),null==this._lastBGMPos&&(this._lastBGMPos=0),0!=this._lastBGMPos&&this._lastBGMPos<this._bgm.length?(this._bgmChannel=this._bgm.play(this._lastBGMPos,1),this._bgmChannel.once(egret.Event.SOUND_COMPLETE,this.onBGMComplete,this)):this._bgmChannel=this._bgm.play(0),this._bgmChannel.volume=1==this.BGM?1:0},e.prototype.onBGMComplete=function(){this._bgmChannel.stop(),this._bgmChannel=this._bgm.play(0),this._bgmChannel.volume=1==this.BGM?1:0},e.prototype.Start=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,RES.loadGroup("sound")];case 1:return e.sent(),this.PlayBGM(),this.soundReady=!0,[2]}})})},e}();window.SoundMain=i,__reflect(i.prototype,"SoundMain",[]),window.onAudioInterruptionBegin=n,window.onAudioInterruptionEnd=o},function(e,t){var n=function(){function e(){}return e.prototype.getTheme=function(e,t,n,o){function r(e){t.call(o,e)}function i(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i,null),n.call(o))}var s=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){t.call(o,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(e,n){window.JSONParseClass.setData(e),egret.callLater(function(){t.call(o,generateEUI2)},s)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(e.indexOf(".exml")>-1){var a=e.split("/");a.pop();var u=a.join("/")+"_EUI.json";generateJSON.paths[e]?egret.callLater(function(){t.call(o,generateJSON.paths[e])},this):RES.getResByUrl(u,function(n){window.JSONParseClass.setData(n),egret.callLater(function(){t.call(o,generateJSON.paths[e])},s)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){t.call(o,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i,null),RES.getResByUrl(e,r,this,RES.ResourceItem.TYPE_TEXT)},e}();window.ThemeAdapter=n,__reflect(n.prototype,"ThemeAdapter",["eui.IThemeAdapter"])},function(e,t){var n=function(){function e(){}return e.IsEqual=function(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0},e.LoadGroupRes=function(e){return __awaiter(this,void 0,void 0,function(){var t,n,o;return __generator(this,function(r){switch(r.label){case 0:for(t=[],n=0;n<e.length;n++)o=e[n],0==RES.isGroupLoaded(o)&&t.push(RES.loadGroup(o));return[4,Promise.all(t)];case 1:return r.sent(),[2]}})})},e.zeroPad=function(e,t){return("000000"+e).slice(-t)},e.RotateVec=function(t,n){var o=e.Normalize(t);if(0>=o)return t;var r=Math.atan2(t.y,t.x);r+=n,t.x=Math.cos(r)*o,t.y=Math.sin(r)*o},e.Normalize=function(e){var t=Math.sqrt(e.x*e.x+e.y*e.y);return t>0&&(e.x/=t,e.y/=t),t},e.LoadRes=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return __awaiter(this,void 0,void 0,function(){var t,n,o;return __generator(this,function(r){switch(r.label){case 0:for(t=[],n=function(n){t.push(new Promise(function(t,o){RES.getResByUrl(e[n],t,null,RES.ResourceItem.TYPE_JSON)}))},o=0;o<e.length;o++)n(o);return[4,Promise.all(t)];case 1:return r.sent(),[2]}})})},e.DestroyGroupRes=function(e){return __awaiter(this,void 0,void 0,function(){var t,n,o;return __generator(this,function(r){switch(r.label){case 0:for(t=[],n=0;n<e.length;n++)o=e[n],1==RES.isGroupLoaded(o)&&t.push(RES.destroyRes(o,!0));return[4,Promise.all(t)];case 1:return r.sent(),[2]}})})},e.Lerp=function(e,t,n){return e+(t-e)*n},e.Clamp=function(e,t,n){return t>e?e=t:e>n&&(e=n),e},e.Dist=function(e,t){return void 0===t&&(t=null),null==t&&(t=e),Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))},e.Dist2=function(e,t){return void 0===t&&(t=null),null==t&&(t=e),(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)},e.VecLength=function(e,t){return Math.sqrt(e*e+t*t)},e.AskFor=function(e,t){null!=t&&t()},e.RandomRange=function(e,t){return e>=t?e:Math.round(Math.random()*(t-e))+e},e.RegistBtnAnim=function(t){t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onBtnDown,null),t.addEventListener(egret.TouchEvent.TOUCH_CANCEL,e.onBtnUp,null),t.addEventListener(egret.TouchEvent.TOUCH_END,e.onBtnUp,null),t.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,e.onBtnUp,null)},e.UnregistBtnAnim=function(t){t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onBtnDown,null),t.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,e.onBtnUp,null),t.removeEventListener(egret.TouchEvent.TOUCH_END,e.onBtnUp,null),t.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,e.onBtnUp,null)},e.onBtnDown=function(e){egret.Tween.removeTweens(e.target),egret.Tween.get(e.target).to({scaleX:1.1,scaleY:1.1},100)},e.onBtnUp=function(e){egret.Tween.removeTweens(e.target),egret.Tween.get(e.target).to({scaleX:1,scaleY:1},100)},e.DistPtToSegment=function(t,n){var o=e.Dist2(n[0],n[1]);if(0>=o)return e.Dist(t,n[0]);var r=((t.x-n[0].x)*(n[1].x-n[0].x)+(t.y-n[0].y)*(n[1].y-n[0].y))/o;return r=e.Clamp(r,0,1),e.Dist(t,{x:n[0].x+r*(n[1].x-n[0].x),y:n[0].y+r*(n[1].y-n[0].y)})},e.linesIntersect=function(e,t){var n=(e[1].x-e[0].x)*(t[1].y-t[0].y)-(t[1].x-t[0].x)*(e[1].y-e[0].y);if(0==n)return!1;var o=((t[1].y-t[0].y)*(t[1].x-e[0].x)+(t[0].x-t[1].x)*(t[1].y-e[0].y))/n,r=((e[0].y-e[1].y)*(t[1].x-e[0].x)+(e[1].x-e[0].x)*(t[1].y-e[0].y))/n;return r>0&&1>r&&o>0&&1>o},e.rectLineIntersect=function(t,n){return 1==e.linesIntersect(n,[{x:t.x,y:t.y},{x:t.x,y:t.y+t.height}])||1==e.linesIntersect(n,[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y}])||1==e.linesIntersect(n,[{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height}])||1==e.linesIntersect(n,[{x:t.x,y:t.y+t.height},{x:t.x+t.width,y:t.y+t.height}])},e}();window.Util=n,__reflect(n.prototype,"Util",[])},function(e,t){var n=window.Scene;window.Scene=n},function(e,t){var n,n=window.Scene;!function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.curFrame=0,t}return __extends(t,e),Object.defineProperty(t,"Inst",{get:function(){if(null==t._inst){var e=new t;t._inst=e}return t._inst},enumerable:!1,configurable:!0}),t.prototype.Start=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.zIndex=999,[2]})})},t.prototype.Login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},t.prototype.Update=function(e){},t}(eui.Component);e.Common=t,__reflect(t.prototype,"Scene.Common",["eui.UIComponent"])}(n||(n={})),window.Scene=n},function(e,t){var n,n=window.Scene;!function(e){var t,t=window.Game;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(e){switch(e){case 0:this.img_bg.texture=RES.getRes("game0_json.img_1"),this.img_letter.texture=null;break;case 1:this.img_letter.texture=RES.getRes("game0_json.b_"+this._letter);break;case 2:case 3:case 4:this.img_bg.texture=RES.getRes("game0_json.img_"+e),this.img_letter.texture=RES.getRes("game0_json.w_"+this._letter)}this._state=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letter",{get:function(){return this._letter},set:function(e){null==e||""==e?(this._letter=null,this.state=0):(this._letter=e,this.state=1)},enumerable:!1,configurable:!0}),t.prototype.Start=function(){this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2,this.state=0},t.prototype.Update=function(e){},t.prototype.Stop=function(){egret.Tween.removeTweens(this),this.scaleY=1},t}(eui.Component);e.Cell=t,__reflect(t.prototype,"Scene.Game.Cell",[]);var n=function(){function e(){this.buf=[]}return Object.defineProperty(e,"Inst",{get:function(){if(null==e._inst){var t=new e;e._inst=t}return e._inst},enumerable:!1,configurable:!0}),e.prototype.Pop=function(e){var n=this.buf.pop();return null==n&&(n=new t),e.addChild(n),n.Start(),n},e.prototype.Push=function(e){e.Stop(),e.parent.removeChild(e),this.buf.push(e)},e}();e.CellPool=n,__reflect(n.prototype,"Scene.Game.CellPool",[])}(t=e.Game||(e.Game={})),window.Game=t}(n||(n={})),window.Scene=n},function(e,t){var n,n=window.Scene;!function(e){var t,t=window.Game;!function(e){e.KeyCode=["Q","W","E","R","T","Y","U","I","O","P","A","S","D","F","G","H","J","K","L","ENTER","Z","X","C","V","B","N","M","DELETE"];var t=function(t){function n(){var e=t.call(this)||this;return e.codeIdx=0,e._color=-1,e}return __extends(n,t),n.prototype.Start=function(t){this.codeIdx=t;var n=e.KeyCode[this.codeIdx];"ENTER"==n?(this.img_code.scaleX=this.img_code.scaleY=.5,this.grp_main.width=this.width=134,this.img_code.texture=RES.getRes("game0_json.img_10")):"DELETE"==n?(this.img_code.scaleX=this.img_code.scaleY=.5,this.grp_main.width=this.width=134,this.img_code.texture=RES.getRes("game0_json.img_9")):(this.img_code.scaleX=this.img_code.scaleY=.85,this.grp_main.width=this.width=86,this.color=0),this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2},Object.defineProperty(n.prototype,"color",{get:function(){return this._color},set:function(t){if(19!=this.codeIdx&&27!=this.codeIdx){switch(t){case 0:this.img_key.texture=RES.getRes("game0_json.img_5"),this.img_code.texture=RES.getRes("game0_json.b_"+e.KeyCode[this.codeIdx]);break;case 2:case 3:case 4:this.img_key.texture=RES.getRes("game0_json.img_"+(t+4)),this.img_code.texture=RES.getRes("game0_json.w_"+e.KeyCode[this.codeIdx])}this._color=t}},enumerable:!1,configurable:!0}),n.prototype.Update=function(e){},n.prototype.Stop=function(){egret.Tween.removeTweens(this),this.scaleX=this.scaleY=1},n}(eui.Component);e.Key=t,__reflect(t.prototype,"Scene.Game.Key",[]);var n=function(){function e(){this.buf=[]}return Object.defineProperty(e,"Inst",{get:function(){if(null==e._inst){var t=new e;e._inst=t}return e._inst},enumerable:!1,configurable:!0}),e.prototype.Pop=function(e,n){var o=this.buf.pop();return null==o&&(o=new t),n.addChild(o),o.Start(e),o},e.prototype.Push=function(e){e.Stop(),e.parent.removeChild(e),this.buf.push(e)},e}();e.KeyPool=n,__reflect(n.prototype,"Scene.Game.KeyPool",[])}(t=e.Game||(e.Game={})),window.Game=t}(n||(n={})),window.Scene=n},function(e,t){var n,n=window.Scene;!function(e){var t=[10,24,22,12,2,13,14,15,7,16,17,18,26,25,8,9,0,3,11,4,6,23,1,21,5,20];e.InputData={touchboard:[],keyboard:[],keyPressNum:[]};var n,n=window.Game;!function(n){var o;!function(e){e[e.Null=0]="Null",e[e.Input=1]="Input",e[e.Check=2]="Check",e[e.End=3]="End"}(o||(o={})),window.GameState=o;var r=function(r){function i(){var n=r.call(this)||this;return n._state=o.Null,n.cellSize=115,n.cells=[],n.keyWidth=99,n.keyHeight=132,n.keys=[],n.isWin=!1,n.onKeyboardDown=function(o){var r,i,s;if(8==o.keyCode){var a=null!==(r=e.InputData.keyPressNum[27])&&void 0!==r?r:0;e.InputData.keyPressNum[27]=2|a,n.updateKeyNum=2}else if(13==o.keyCode){var a=null!==(i=e.InputData.keyPressNum[19])&&void 0!==i?i:0;e.InputData.keyPressNum[19]=2|a,n.updateKeyNum=2}else if(o.keyCode>=65&&o.keyCode<=90){var a=null!==(s=e.InputData.keyPressNum[t[o.keyCode-65]])&&void 0!==s?s:0;e.InputData.keyPressNum[t[o.keyCode-65]]=2|a,n.updateKeyNum=2}},n.onKeyboardUp=function(r){n.state==o.End?n.ResetWordle():8==r.keyCode?(e.InputData.keyPressNum[27]&=1,n.updateKeyNum=2,e.InputData.keyPressNum[27]<=0&&n.dispatchEventWith("WORDLE_INPUT",!1,{keyCode:27})):13==r.keyCode?(e.InputData.keyPressNum[19]&=1,n.updateKeyNum=2,e.InputData.keyPressNum[19]<=0&&n.dispatchEventWith("WORDLE_INPUT",!1,{keyCode:19})):r.keyCode>=65&&r.keyCode<=90&&(e.InputData.keyPressNum[t[r.keyCode-65]]&=1,n.updateKeyNum=2,e.InputData.keyPressNum[t[r.keyCode-65]]<=0&&n.dispatchEventWith("WORDLE_INPUT",!1,{keyCode:t[r.keyCode-65]}))},n.updateKeyNum=0,n.answerWord="hello",n.minWordIdx=0,n.wordIdx=0,n.needCheck=!1,n.wordCheckResult=[],n}return __extends(i,r),Object.defineProperty(i.prototype,"state",{get:function(){return this._state},set:function(e){switch(e){case o.Input:this.grp_over.visible=!1,this.grp_keyboard.visible=!0,this._state==o.Null||this._state==o.End&&egret.Tween.removeTweens(this.lbl_continue);break;case o.Check:break;case o.End:this.grp_over.once(egret.TouchEvent.TOUCH_TAP,this.onTapReset,this),this.lbl_over.text=1==this.isWin?"You Win!":"Out of tries   ("+this.answerWord+")",this.grp_over.visible=!0,this.grp_keyboard.visible=!1,egret.Tween.removeTweens(this.lbl_continue),this.lbl_continue.alpha=1,egret.Tween.get(this.lbl_continue,{loop:!0}).to({alpha:.2},2e3).to({alpha:1},2e3)}this._state=e},enumerable:!1,configurable:!0}),i.prototype.Start=function(){this.onResize(),this.addEventListener(egret.Event.RESIZE,this.onResize,this),document.addEventListener("keydown",this.onKeyboardDown),document.addEventListener("keyup",this.onKeyboardUp),this.grp_keyboard.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchboardBegin,this),this.grp_keyboard.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchboardEnd,this),this.grp_keyboard.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchboardEnd,this),this.grp_keyboard.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchboardEnd,this);for(var e=5,t=6,r=e*t,i=0;r>i;i++){var s=n.CellPool.Inst.Pop(this.grp_cell);this.cells.push(s),s.x=i%e*this.cellSize+this.cellSize/2,s.y=Math.floor(i/e)*this.cellSize+this.cellSize/2}e=10,t=3,r=28;for(var i=0;r>i;i++){var a=n.KeyPool.Inst.Pop(i,this.grp_keyboard);this.keys.push(a),10>i?(a.x=i%e*this.keyWidth+this.keyWidth/2,a.y=this.keyHeight/2):19>i?(a.x=i%e*this.keyWidth+this.keyWidth,a.y=this.keyHeight+this.keyHeight/2):(19==i?a.x=a.width/2+7:27>i?a.x=i%e*this.keyWidth+2*this.keyWidth:a.x=915.75,a.y=2*this.keyHeight+this.keyHeight/2)}var u=this.StartWordle();u>0?(1==u?this.isWin=!0:this.isWin=!1,this.state=o.End):this.state=o.Input},i.prototype.onResize=function(){console.log("onResize");var e=window.innerHeight/window.innerWidth;if(1336/1136>e){var t=1336/window.innerHeight,n=100*t,o=1136+2*n;this.grp_main.scaleX=this.grp_main.scaleY=Math.min(1,1336/o)}else{var t=1136/window.innerWidth,n=100*t,o=1136+2*n;this.grp_main.scaleX=this.grp_main.scaleY=Math.min(1,window.innerHeight*t/o)}},i.prototype.onTapReset=function(){this.state==o.End&&this.ResetWordle()},i.prototype.getTouchKey=function(e,t){var n=-1,o=Math.floor(t/this.keyHeight);return 0==o?n=Math.floor(e/this.keyWidth):1==o?e<this.keyWidth/2||e>this.grp_keyboard.width-this.keyWidth/2||(n=10+Math.floor((e-this.keyWidth/2)/this.keyWidth)):2==o&&(n=148>e?19:e>this.grp_keyboard.width-148?27:20+Math.floor((e-148)/this.keyWidth)),n},i.prototype.onTouchboardBegin=function(t){var n,o=this.getTouchKey(t.localX,t.localY);if(o>=0){e.InputData.touchboard[t.touchPointID]=o;var r=null!==(n=e.InputData.keyPressNum[o])&&void 0!==n?n:0;e.InputData.keyPressNum[o]=1|r,this.updateKeyNum=2}},i.prototype.onTouchboardEnd=function(t){if(!(e.InputData.touchboard[t.touchPointID]<0)){e.InputData.keyPressNum[e.InputData.touchboard[t.touchPointID]]&=2,this.updateKeyNum=2;var n=this.getTouchKey(t.localX,t.localY);e.InputData.touchboard[t.touchPointID]==n&&e.InputData.keyPressNum[n]<=0&&this.dispatchEventWith("WORDLE_INPUT",!1,{keyCode:n}),e.InputData.touchboard[t.touchPointID]=-1}},i.prototype.updateKeyState=function(){for(var t,n,o=0;o<e.InputData.keyPressNum.length;o++){var r=null!==(t=e.InputData.keyboard[o])&&void 0!==t?t:0,i=null!==(n=e.InputData.keyPressNum[o])&&void 0!==n?n:0;if(0==r?i>0&&(r=2):2==r?i>0?r=3:0>=i&&(r=1):1==r?i>0?r=2:0>=i&&(r=0):3==r&&0>=i&&(r=1),e.InputData.keyboard[o]=r,2==r){var s=this.keys[o];egret.Tween.removeTweens(s),egret.Tween.get(s).to({scaleX:1.1,scaleY:1.1},100)}else if(1==r){var s=this.keys[o];egret.Tween.removeTweens(s),egret.Tween.get(s).to({scaleX:1,scaleY:1},100)}}},i.prototype.Update=function(e){this.updateKeyNum>0&&(this.updateKeyState(),this.updateKeyNum--)},i.prototype.Stop=function(){this.StopWordle(),this.removeEventListener(egret.Event.RESIZE,this.onResize,this),this.grp_over.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapReset,this),document.removeEventListener("keydown",this.onKeyboardDown),document.removeEventListener("keyup",this.onKeyboardUp),this.grp_keyboard.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchboardBegin,this),this.grp_keyboard.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchboardEnd,this),this.grp_keyboard.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchboardEnd,this),this.grp_keyboard.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchboardEnd,this);for(var e=0;e<this.cells.length;e++)n.CellPool.Inst.Push(this.cells[e]);this.cells.length=0;
for(var e=0;e<this.keys.length;e++)n.KeyPool.Inst.Push(this.keys[e]);this.keys.length=0},i.prototype.StartWordle=function(){var e=0;this.addEventListener("WORDLE_INPUT",this.onTapWordle,this),this.answerWord=GMain.Inst.answerWords[Math.floor(Math.random()*GMain.Inst.answerWords.length)].toUpperCase(),this.needCheck=!1,this.wordIdx=0,this.minWordIdx=0;for(var n=0;n<this.cells.length;n++)this.cells[n].state=0;for(var n=0;n<this.keys.length;n++)this.keys[n].color=0;if(null!=MyStorage.Inst.daily){var o=new Date(MyStorage.Inst.daily[2]),r=new Date;if(o.getFullYear()==r.getFullYear()&&o.getMonth()==r.getMonth()&&o.getDate()==r.getDate()){this.answerWord=MyStorage.Inst.daily[3];var i=MyStorage.Inst.daily[0];this.minWordIdx=MyStorage.Inst.daily[1],this.wordIdx=i.length,this.wordIdx%5==0&&this.minWordIdx<this.wordIdx&&(this.needCheck=!0);for(var s="",n=0;n<i.length;n++)if(this.cells[n].letter=i[n],s+=i[n],5==s.length){for(var a=this.CheckWordle2(s),u=0;5>u;u++){this.cells[n-4+u].state=this.wordCheckResult[u];var l=this.keys[t[s.charCodeAt(u)-65]];0==l.color?l.color=this.wordCheckResult[u]:(4==l.color||2==l.color)&&3==this.wordCheckResult[u]&&(l.color=3)}s="",1==a&&(e=1)}return 0==e&&this.minWordIdx>=30&&(e=2),e}MyStorage.Inst.daily=null}return e},i.prototype.ResetWordle=function(){MyStorage.Inst.daily=null,MyStorage.Inst.Save(),this.answerWord=GMain.Inst.answerWords[Math.floor(Math.random()*GMain.Inst.answerWords.length)].toUpperCase(),this.needCheck=!1,this.wordIdx=0,this.minWordIdx=0;for(var e=0;e<this.cells.length;e++)this.cells[e].state=0;for(var e=0;e<this.keys.length;e++)this.keys[e].color=0;this.state=o.Input},i.prototype.SaveWordle=function(){if(!(this.wordIdx<=0)){for(var e="",t=0;t<this.wordIdx;t++)e+=this.cells[t].letter;MyStorage.Inst.daily=[e,this.minWordIdx,(new Date).getTime(),this.answerWord],MyStorage.Inst.Save()}},i.prototype.onTapWordle=function(e){switch(this.state){case o.Input:var t=e.data.keyCode,r=n.KeyCode[t];if(r==n.KeyCode[19]){if(1==this.needCheck){this.state=o.Check;for(var i="",s=0;5>s;s++)i+=this.cells[this.wordIdx-5+s].letter;1==GMain.Inst.allWords.has(i)||1==GMain.Inst.allWords.has(i.toLowerCase())?(this.minWordIdx=this.wordIdx,this.CheckWordle(i),this.SaveWordle()):this.NotAWord()}}else r==n.KeyCode[27]?this.wordIdx>this.minWordIdx&&(this.wordIdx--,this.cells[this.wordIdx].letter=null,this.needCheck=!1):0==this.needCheck&&(this.cells[this.wordIdx].letter=r,this.wordIdx++,this.wordIdx%5==0&&this.wordIdx>0&&(this.needCheck=!0))}},i.prototype.NotAWord=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n,r=this;return __generator(this,function(i){switch(i.label){case 0:return e=Math.random()<.5?-2:2,t=this.cells[this.minWordIdx],n=t.x,[4,new Promise(function(o){egret.Tween.removeTweens(t),egret.Tween.get(t,{onChange:function(){for(var e=1;5>e;e++){var n=r.cells[r.minWordIdx+e];n.x=t.x+115*e}}}).to({x:n+-10*e},50,egret.Ease.sineOut).to({x:n+10*e},100,egret.Ease.sineInOut).to({x:n+-8*e},90,egret.Ease.sineInOut).to({x:n+6*e},70,egret.Ease.sineInOut).to({x:n+-4*e},50,egret.Ease.sineInOut).to({x:n+2*e},30,egret.Ease.sineInOut).to({x:n+0*e},10,egret.Ease.sineInOut).call(function(){t.x=n;for(var e=1;5>e;e++){var o=r.cells[r.minWordIdx+e];o.x=t.x+115*e}}).wait(100).call(function(){t.letter=null;for(var e=1;5>e;e++){var n=r.cells[r.minWordIdx+e];n.letter=null}r.wordIdx=r.minWordIdx,o(null)})})];case 1:return i.sent(),this.needCheck=!1,this.state=o.Input,[2]}})})},i.prototype.CheckWordle2=function(e){for(var t=!0,n=0;5>n;n++){var o=this.answerWord[n],r=e[n];if(o==r)this.wordCheckResult[n]=3;else if(this.answerWord.indexOf(r)<0)this.wordCheckResult[n]=2,t=!1;else{t=!1;for(var i=0,s=0,a=0;a<this.answerWord.length;a++)this.answerWord[a]!=e[a]&&(this.answerWord[a]==r&&i++,n>=a&&e[a]==r&&s++);s>i?this.wordCheckResult[n]=2:this.wordCheckResult[n]=4}}return t},i.prototype.CheckWordle=function(e){return __awaiter(this,void 0,void 0,function(){var n,r,i,s,s,a;return __generator(this,function(u){switch(u.label){case 0:n=this.CheckWordle2(e),r=function(e){var t;return __generator(this,function(n){switch(n.label){case 0:return t=i.cells[i.wordIdx-5+e],[4,new Promise(function(e){egret.Tween.get(t).to({scaleY:0},100,egret.Ease.sineIn).call(e)})];case 1:return n.sent(),i.cells[i.wordIdx-5+e].state=i.wordCheckResult[e],[4,new Promise(function(e){egret.Tween.get(t).to({scaleY:1},100,egret.Ease.sineIn).call(e)})];case 2:return n.sent(),[2]}})},i=this,s=0,u.label=1;case 1:return 5>s?[5,r(s)]:[3,4];case 2:u.sent(),u.label=3;case 3:return s++,[3,1];case 4:for(s=0;s<e.length;s++)a=this.keys[t[e.charCodeAt(s)-65]],0==a.color?(a.color=this.wordCheckResult[s],egret.Tween.removeTweens(a),egret.Tween.get(a).to({scaleX:1.1,scaleY:1.1},100,egret.Ease.sineOut).to({scaleX:1,scaleY:1},100,egret.Ease.sineIn)):(4==a.color||2==a.color)&&3==this.wordCheckResult[s]&&(a.color=3,egret.Tween.removeTweens(a),egret.Tween.get(a).to({scaleX:1.1,scaleY:1.1},100,egret.Ease.sineOut).to({scaleX:1,scaleY:1},100,egret.Ease.sineIn));return[4,new Promise(function(e){egret.setTimeout(e,null,500)})];case 5:return u.sent(),this.needCheck=!1,1==n?(this.isWin=!0,this.state=o.End):this.wordIdx>=30?(this.isWin=!1,this.state=o.End):this.state=o.Input,[2]}})})},i.prototype.StopWordle=function(){this.removeEventListener("WORDLE_INPUT",this.onTapWordle,this)},i}(eui.Component);n.Main=r,__reflect(r.prototype,"Scene.Game.Main",["eui.UIComponent","Base"])}(n=e.Game||(e.Game={})),window.Game=n}(n||(n={})),window.Scene=n}]);